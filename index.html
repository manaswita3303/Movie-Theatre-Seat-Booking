<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Theatre Seat Booking</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Movie Theatre Seat Booking</h1>
        </header>

        <div class="movie-selection">
            <select id="movie">
                <option value="12">Avengers: Endgame ($12)</option>
                <option value="10">The Lion King ($10)</option>
                <option value="8">Joker ($8)</option>
                <option value="15">Dune ($15)</option>
            </select>

            <select id="time" class="time-selection">
                <option value="10:00">10:00 AM</option>
                <option value="13:00">1:00 PM</option>
                <option value="16:00">4:00 PM</option>
                <option value="19:00">7:00 PM</option>
                <option value="22:00">10:00 PM</option>
            </select>

            <input type="date" id="date" class="date-selection" min="">
        </div>
        <div class="legend">
            <div class="legend-item">
                <div class="seat-example seat-available"></div>
                <span>Available</span>
            </div>
            <div class="legend-item">
                <div class="seat-example seat-selected"></div>
                <span>Selected</span>
            </div>
            <div class="legend-item">
                <div class="seat-example seat-booked"></div>
                <span>Booked</span>
            </div>
            <div class="legend-item">
                <div class="seat-example seat-premium"></div>
                <span>Premium</span>
            </div>
        </div>

        <div class="screen-container">
            <div class="screen"></div>
        </div>

        <div class="seats-container">
            <div class="seats-grid" id="seatsGrid">
                <!-- Seats will be generated by JavaScript -->
            </div>
        </div>

        <div class="summary">
            <h3>Booking Summary</h3>
            <div class="summary-details">
                <div class="detail-item">
                    <span>Movie:</span>
                    <span id="movieName">Avengers: Endgame</span>
                </div>
                <div class="detail-item">
                    <span>When:</span>
                    <span id="showTime"></span>
                </div>
                <div class="detail-item">
                    <span>Selected Seats:</span>
                    <div class="seat-list" id="selectedSeatsList"></div>
                </div>
                <div class="detail-item">
                    <span>Number of Seats:</span>
                    <span id="count">0</span>
                </div>
                <div class="detail-item">
                    <span>Total Price:</span>
                    <span id="total">$0</span>
                </div>
            </div>
        </div>

        <button class="btn" id="bookBtn" disabled>Book Tickets</button>
    </div>

    <div class="modal" id="successModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Booking Successful!</h2>
            <div class="booking-success">
                <p>Your tickets have been booked successfully.</p>
                <p id="bookingDetails"></p>
            </div>
            <button class="btn" id="closeModalBtn">Close</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const container = document.querySelector('.seats-container');
            const seatsGrid = document.getElementById('seatsGrid');
            const count = document.getElementById('count');
            const total = document.getElementById('total');
            const movieSelect = document.getElementById('movie');
            const timeSelect = document.getElementById('time');
            const dateSelect = document.getElementById('date');
            const movieName = document.getElementById('movieName');
            const showTime = document.getElementById('showTime');
            const selectedSeatsList = document.getElementById('selectedSeatsList');
            const bookBtn = document.getElementById('bookBtn');
            const successModal = document.getElementById('successModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const bookingDetails = document.getElementById('bookingDetails');
            const closeModal = document.querySelector('.close-modal');

            // Set min date to today
            const today = new Date();
            dateSelect.min = today.toISOString().split('T')[0];
            dateSelect.value = today.toISOString().split('T')[0];

            // Initial ticket price
            let ticketPrice = +movieSelect.value;
            
            // Seat status data (can be replaced with API data)
            const seatStatusData = {
                // Generate random seat status
                generateRandomStatus: function(row, col) {
                    // First two rows are premium
                    const isPremium = row <= 2;
                    
                    // Simulate some booked seats (roughly 20%)
                    const isBooked = Math.random() < 0.2;
                    
                    if (isBooked) {
                        return 'booked';
                    } else if (isPremium) {
                        return 'premium';
                    } else {
                        return 'available';
                    }
                }
            };

            // Generate seat grid
            function generateSeats() {
                // Clear existing grid
                seatsGrid.innerHTML = '';
                
                // Number of rows and columns
                const rows = 8;
                const cols = 10;
                
                // Row labels (A-H)
                const rowLabels = Array.from({length: rows}, (_, i) => String.fromCharCode(65 + i));
                
                // Add row labels and seats
                for (let i = 0; i < rows; i++) {
                    // Add row label at the start
                    const rowLabelStart = document.createElement('div');
                    rowLabelStart.classList.add('row-label');
                    rowLabelStart.textContent = rowLabels[i];
                    seatsGrid.appendChild(rowLabelStart);
                    
                    // Add seats
                    for (let j = 0; j < cols; j++) {
                        const seat = document.createElement('div');
                        seat.classList.add('seat');
                        
                        // Get seat status
                        const status = seatStatusData.generateRandomStatus(i, j);
                        seat.classList.add(status);
                        
                        // Set seat ID (e.g., A1, B5)
                        const seatId = `${rowLabels[i]}${j + 1}`;
                        seat.dataset.id = seatId;
                        seat.textContent = seatId;
                        
                        seatsGrid.appendChild(seat);
                    }
                    
                    // Add row label at the end
                    const rowLabelEnd = document.createElement('div');
                    rowLabelEnd.classList.add('row-label');
                    rowLabelEnd.textContent = rowLabels[i];
                    seatsGrid.appendChild(rowLabelEnd);
                }
            }

            // Initialize seat grid
            generateSeats();

            // Update selected count and total price
            function updateSelectedCount() {
                const selectedSeats = document.querySelectorAll('.seat.selected');
                const selectedPremiumSeats = document.querySelectorAll('.seat.premium.selected');
                
                const selectedSeatsCount = selectedSeats.length;
                
                // Calculate total price (premium seats cost 50% more)
                let totalPrice = 0;
                selectedSeats.forEach(seat => {
                    if (seat.classList.contains('premium')) {
                        totalPrice += ticketPrice * 1.5; // 50% premium
                    } else {
                        totalPrice += ticketPrice;
                    }
                });
                
                // Update display
                count.textContent = selectedSeatsCount;
                total.textContent = `$${totalPrice.toFixed(2)}`;
                
                // Enable/disable book button
                bookBtn.disabled = selectedSeatsCount === 0;
                
                // Update selected seats list
                selectedSeatsList.innerHTML = '';
                selectedSeats.forEach(seat => {
                    const seatTag = document.createElement('span');
                    seatTag.classList.add('seat-tag');
                    if (seat.classList.contains('premium')) {
                        seatTag.classList.add('premium-tag');
                    }
                    seatTag.textContent = seat.dataset.id;
                    selectedSeatsList.appendChild(seatTag);
                });
            }

            // Update movie display
            function updateMovieInfo() {
                movieName.textContent = movieSelect.options[movieSelect.selectedIndex].text.split('(')[0].trim();
                updateShowTime();
            }

            // Update show time display
            function updateShowTime() {
                const formattedDate = new Date(dateSelect.value).toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                showTime.textContent = `${formattedDate} at ${timeSelect.value}`;
            }

            // Seat click event
            seatsGrid.addEventListener('click', e => {
                if (
                    e.target.classList.contains('seat') && 
                    !e.target.classList.contains('booked')
                ) {
                    e.target.classList.toggle('selected');
                    updateSelectedCount();
                }
            });

            // Movie select event
            movieSelect.addEventListener('change', e => {
                ticketPrice = +e.target.value;
                updateMovieInfo();
                updateSelectedCount();
            });

            // Time select event
            timeSelect.addEventListener('change', updateShowTime);

            // Date select event
            dateSelect.addEventListener('change', updateShowTime);

            // Book button event
            bookBtn.addEventListener('click', () => {
                const selectedSeats = document.querySelectorAll('.seat.selected');
                const seatList = Array.from(selectedSeats).map(seat => seat.dataset.id).join(', ');
                
                // Display booking details in modal
                bookingDetails.textContent = `Movie: ${movieName.textContent}
                Date & Time: ${showTime.textContent}
                Seats: ${seatList}
                Total: ${total.textContent}`;
                
                // Show success modal
                successModal.style.display = 'block';
                
                // Mark selected seats as booked
                selectedSeats.forEach(seat => {
                    seat.classList.remove('selected');
                    seat.classList.add('booked');
                });
                
                // Update counts
                updateSelectedCount();
            });

            // Close modal events
            closeModal.addEventListener('click', () => {
                successModal.style.display = 'none';
            });
            
            closeModalBtn.addEventListener('click', () => {
                successModal.style.display = 'none';
            });
            
            window.addEventListener('click', e => {
                if (e.target === successModal) {
                    successModal.style.display = 'none';
                }
            });

            // Initialize displays
            updateMovieInfo();
            updateSelectedCount();
        });
    </script>




    
</body>
</html>